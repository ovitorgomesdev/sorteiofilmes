<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tense Review Game</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font for a friendly look */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #e0f2fe; /* Light blue background */
        }
        /* Custom button styles for a more engaging look */
        .game-button {
            transition: all 0.2s ease-in-out;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: none;
        }
        .game-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }
        .game-button:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .correct-answer {
            background-color: #a7f3d0; /* Light green for correct */
            border: 2px solid #34d399;
        }
        .wrong-answer {
            background-color: #fecaca; /* Light red for wrong */
            border: 2px solid #ef4444;
        }
        .game-container {
            max-width: 600px;
            min-height: 450px; /* Ensure minimum height to prevent layout shifts */
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">
    <div class="game-container bg-white rounded-xl shadow-2xl p-6 md:p-8 text-center flex flex-col justify-between">
        <!-- Game Title -->
        <h1 class="text-3xl md:text-4xl font-bold text-blue-700 mb-6">Tense Master Challenge!</h1>

        <!-- Score and Timer Display -->
        <div class="flex justify-between items-center mb-6 text-xl font-semibold text-gray-700">
            <div id="scoreDisplay">Score: 0</div>
            <div id="timerDisplay">Time: 10:00</div>
        </div>

        <!-- Question Area -->
        <div id="gameArea" class="flex flex-col items-center justify-center flex-grow mb-8">
            <p id="questionSentence" class="text-2xl md:text-3xl text-gray-800 mb-4 leading-relaxed">
                Click "Start Game" to begin!
            </p>
            <p id="verbHint" class="text-lg md:text-xl text-gray-600 italic">
                (Verb: to ___ )
            </p>
            <div id="feedbackMessage" class="text-lg font-semibold mt-4 h-6"></div>
        </div>

        <!-- Answer Buttons -->
        <div id="answerButtons" class="flex flex-col space-y-4 mb-6">
            <button id="option1Button" class="game-button bg-blue-500 text-white py-3 px-6 rounded-lg text-xl font-semibold hover:bg-blue-600 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-colors duration-200" disabled>
                Option 1
            </button>
            <button id="option2Button" class="game-button bg-blue-500 text-white py-3 px-6 rounded-lg text-xl font-semibold hover:bg-blue-600 focus:outline-none focus:ring-4 focus:ring-blue-300 transition-colors duration-200" disabled>
                Option 2
            </button>
        </div>

        <!-- Start/Restart Button -->
        <button id="startButton" class="game-button bg-green-500 text-white py-4 px-8 rounded-lg text-2xl font-bold hover:bg-green-600 focus:outline-none focus:ring-4 focus:ring-green-300 transition-colors duration-200">
            Start Game
        </button>

        <!-- Game Over / Score Message -->
        <div id="gameOverScreen" class="hidden mt-8 text-center">
            <p class="text-3xl md:text-4xl font-bold text-blue-700 mb-4">Game Over!</p>
            <p id="finalScore" class="text-2xl text-gray-800 mb-6">Your final score: 0</p>
            <button id="playAgainButton" class="game-button bg-purple-500 text-white py-3 px-6 rounded-lg text-xl font-semibold hover:bg-purple-600 focus:outline-none focus:ring-4 focus:ring-purple-300 transition-colors duration-200">
                Play Again!
            </button>
        </div>
    </div>

    <script>
        // Array of questions. Each question includes the sentence, the base verb,
        // the correct tense (present/past), and the conjugated forms for both tenses.
        const questions = [
            { id: 1, sentence: "Every day, I ___ to school.", verb: "go", correctTense: "present", presentForm: "go", pastForm: "went" },
            { id: 2, sentence: "Last night, she ___ a delicious dinner.", verb: "cook", correctTense: "past", presentForm: "cooks", pastForm: "cooked" },
            { id: 3, sentence: "They always ___ football on Saturdays.", verb: "play", correctTense: "present", presentForm: "play", pastForm: "played" },
            { id: 4, sentence: "Two days ago, he ___ a new book.", verb: "read", correctTense: "past", presentForm: "reads", pastForm: "read" },
            { id: 5, sentence: "We usually ___ TV in the evening.", verb: "watch", correctTense: "present", presentForm: "watch", pastForm: "watched" },
            { id: 6, sentence: "Yesterday, they ___ to the beach.", verb: "go", correctTense: "past", presentForm: "go", pastForm: "went" },
            { id: 7, sentence: "She ___ up early every morning.", verb: "get", correctTense: "present", presentForm: "gets", pastForm: "got" },
            { id: 8, sentence: "Last summer, we ___ on vacation.", verb: "travel", correctTense: "past", presentForm: "travel", pastForm: "traveled" },
            { id: 9, sentence: "He often ___ coffee in the afternoon.", verb: "drink", correctTense: "present", presentForm: "drinks", pastForm: "drank" },
            { id: 10, sentence: "An hour ago, I ___ my homework.", verb: "finish", correctTense: "past", presentForm: "finish", pastForm: "finished" },
            { id: 11, sentence: "Usually, my dog ___ loudly at strangers.", verb: "bark", correctTense: "present", presentForm: "barks", pastForm: "barked" },
            { id: 12, sentence: "Last week, I ___ a letter to my grandma.", verb: "write", correctTense: "past", presentForm: "write", pastForm: "wrote" },
            { id: 13, sentence: "Every Sunday, she ___ her grandparents.", verb: "visit", correctTense: "present", presentForm: "visits", pastForm: "visited" },
            { id: 14, sentence: "This morning, we ___ breakfast together.", verb: "have", correctTense: "past", presentForm: "have", pastForm: "had" },
            { id: 15, sentence: "Birds often ___ in the sky.", verb: "fly", correctTense: "present", presentForm: "fly", pastForm: "flew" },
            { id: 16, sentence: "Yesterday, he ___ a new song.", verb: "sing", correctTense: "past", presentForm: "sings", pastForm: "sang" },
            { id: 17, sentence: "My cat always ___ on the sofa.", verb: "sleep", correctTense: "present", presentForm: "sleeps", pastForm: "slept" },
            { id: 18, sentence: "Last month, they ___ a big party.", verb: "organize", correctTense: "past", presentForm: "organize", pastForm: "organized" },
        ];

        // Game state variables
        let score = 0;
        let currentQuestionIndex = 0;
        let timeLeft = 600; // 10 minutes in seconds
        let timerInterval;
        let shuffledQuestions = [];

        // DOM element references
        const scoreDisplay = document.getElementById('scoreDisplay');
        const timerDisplay = document.getElementById('timerDisplay');
        const questionSentence = document.getElementById('questionSentence');
        const verbHint = document.getElementById('verbHint');
        const option1Button = document.getElementById('option1Button');
        const option2Button = document.getElementById('option2Button');
        const startButton = document.getElementById('startButton');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const finalScoreDisplay = document.getElementById('finalScore');
        const playAgainButton = document.getElementById('playAgainButton');
        const gameArea = document.getElementById('gameArea');
        const answerButtonsContainer = document.getElementById('answerButtons');
        const feedbackMessage = document.getElementById('feedbackMessage');


        /**
         * Shuffles an array in place using the Fisher-Yates (Knuth) algorithm.
         * @param {Array} array The array to shuffle.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; // Swap elements
            }
        }

        /**
         * Initializes and starts the game.
         * Resets score, timer, shuffles questions, and displays the first question.
         */
        function startGame() {
            score = 0;
            currentQuestionIndex = 0;
            timeLeft = 600; // Reset to 10 minutes
            scoreDisplay.textContent = `Score: ${score}`;
            feedbackMessage.textContent = ''; // Clear feedback message
            shuffledQuestions = [...questions]; // Create a shallow copy
            shuffleArray(shuffledQuestions);

            // Hide game over screen, show game elements
            gameOverScreen.classList.add('hidden');
            gameArea.classList.remove('hidden');
            answerButtonsContainer.classList.remove('hidden');
            startButton.classList.add('hidden'); // Hide start button

            // Start the timer
            clearInterval(timerInterval); // Clear any existing timer
            timerInterval = setInterval(updateTimer, 1000);

            displayQuestion();
        }

        /**
         * Updates the timer display and ends the game if time runs out.
         */
        function updateTimer() {
            timeLeft--;
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            timerDisplay.textContent = `Time: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

            if (timeLeft <= 0) {
                endGame();
            }
        }

        /**
         * Displays the current question, its verb hint, and sets up the answer buttons.
         */
        function displayQuestion() {
            // Check if there are more questions or if time has run out
            if (currentQuestionIndex >= shuffledQuestions.length || timeLeft <= 0) {
                endGame();
                return;
            }

            const currentQuestion = shuffledQuestions[currentQuestionIndex];

            // Reset button styles and enable them
            option1Button.classList.remove('correct-answer', 'wrong-answer');
            option2Button.classList.remove('correct-answer', 'wrong-answer');
            option1Button.disabled = false;
            option2Button.disabled = false;
            feedbackMessage.textContent = ''; // Clear feedback message

            questionSentence.textContent = currentQuestion.sentence;
            verbHint.textContent = `(Verb: to ${currentQuestion.verb})`;

            // Randomly assign present and past forms to buttons
            const options = [currentQuestion.presentForm, currentQuestion.pastForm];
            shuffleArray(options); // Shuffle the order of the options

            option1Button.textContent = options[0];
            option2Button.textContent = options[1];

            // Attach event listeners to buttons with the correct option for checking
            option1Button.onclick = () => checkAnswer(options[0], currentQuestion);
            option2Button.onclick = () => checkAnswer(options[1], currentQuestion);
        }

        /**
         * Checks the chosen answer against the correct one, updates score,
         * provides feedback, and moves to the next question.
         * @param {string} chosenForm The verb form chosen by the student.
         * @param {Object} currentQuestion The current question object.
         */
        function checkAnswer(chosenForm, currentQuestion) {
            // Disable buttons to prevent multiple clicks
            option1Button.disabled = true;
            option2Button.disabled = true;

            const correctAnswerForm = currentQuestion.correctTense === 'present' ?
                                       currentQuestion.presentForm :
                                       currentQuestion.pastForm;

            let isCorrect = (chosenForm === correctAnswerForm);

            // Apply visual feedback
            if (option1Button.textContent === chosenForm) {
                option1Button.classList.add(isCorrect ? 'correct-answer' : 'wrong-answer');
                if (!isCorrect) {
                    option2Button.classList.add(currentQuestion.correctTense === 'present' ? 'correct-answer' : 'wrong-answer');
                }
            } else {
                option2Button.classList.add(isCorrect ? 'correct-answer' : 'wrong-answer');
                 if (!isCorrect) {
                    option1Button.classList.add(currentQuestion.correctTense === 'present' ? 'correct-answer' : 'wrong-answer');
                }
            }

            if (isCorrect) {
                score += 10; // Award 10 points for a correct answer
                feedbackMessage.textContent = 'Correct!';
                feedbackMessage.classList.remove('text-red-600');
                feedbackMessage.classList.add('text-green-600');
            } else {
                score -= 5; // Deduct 5 points for an incorrect answer
                feedbackMessage.textContent = 'Incorrect!';
                feedbackMessage.classList.remove('text-green-600');
                feedbackMessage.classList.add('text-red-600');
            }
            scoreDisplay.textContent = `Score: ${score}`;

            // Move to the next question after a short delay
            setTimeout(() => {
                currentQuestionIndex++;
                displayQuestion();
            }, 1000); // 1-second delay for feedback
        }

        /**
         * Ends the game, stops the timer, and displays the final score.
         */
        function endGame() {
            clearInterval(timerInterval); // Stop the timer

            // Hide game elements, show game over screen
            gameArea.classList.add('hidden');
            answerButtonsContainer.classList.add('hidden');
            startButton.classList.remove('hidden'); // Show start button again
            startButton.textContent = "Play Again!"; // Change text for restart
            gameOverScreen.classList.remove('hidden');
            finalScoreDisplay.textContent = `Your final score: ${score}`;
            option1Button.disabled = true; // Ensure buttons are disabled at end
            option2Button.disabled = true; // Ensure buttons are disabled at end
        }

        // Event Listeners
        window.onload = function() {
            startButton.addEventListener('click', startGame);
            playAgainButton.addEventListener('click', startGame); // This button appears only after game over
        };
    </script>
</body>
</html>
